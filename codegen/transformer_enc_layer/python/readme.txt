Implementation from torch.nn.Transformer. Additional change: Removed pytorch's custom C++ optimizations.
